<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    
    <title>Flipgame Level Editor</title>
    
    <!-- Bootstrap CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="assets/css/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="editor_styles.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="editor_favicon.svg">
</head>
<body>
    <!-- Loading overlay -->
    <div id="loadingOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #1a1a1a; z-index: 9999; display: flex; align-items: center; justify-content: center;">
        <div style="text-align: center; color: #fff;">
            <div style="font-size: 24px; font-weight: bold; margin-bottom: 20px;">Loading Flip Editor...</div>
            <div style="width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid #007bff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
        </div>
    </div>
    
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .build-info {
            position: fixed;
            bottom: 4px;
            left: 4px;
            font-size: 8px;
            color: rgba(255, 255, 255, 0.3);
            font-family: 'Courier New', monospace;
            z-index: 1000;
            pointer-events: none;
            user-select: none;
            line-height: 1.1;
        }
        .build-info:hover {
            color: rgba(255, 255, 255, 0.6);
        }
    </style>

    <div class="editor-container">
        <!-- Toolbar -->
        <div class="toolbar">
            <div class="editor-title">
                <h3><img src="editor_favicon.svg" alt="Flip Editor" width="24" height="24">Flip Editor</h3>
            </div>
            
            <div class="toolbar-section">
                <div class="toolbar-title" data-bs-toggle="collapse" data-bs-target="#nodeTypesCollapse" aria-expanded="false" aria-controls="nodeTypesCollapse" style="cursor: pointer;">
                    <i class="bi bi-chevron-down" id="nodeTypesIcon"></i> Node Types
                </div>
                <div class="collapse" id="nodeTypesCollapse">
                    <div class="node-tool" data-type="__">
                        <div class="node-preview"></div>
                        <div class="node-label">Empty</div>
                    </div>
                    <div class="node-tool" data-type="p0">
                        <div class="node-preview">p0</div>
                        <div class="node-label">Path (All Balls)</div>
                    </div>
                    <div class="node-tool" data-type="p1">
                        <div class="node-preview">p1</div>
                        <div class="node-label">Path (Ball 1)</div>
                    </div>
                    <div class="node-tool" data-type="p2">
                        <div class="node-preview">p2</div>
                        <div class="node-label">Path (Ball 2)</div>
                    </div>
                    <div class="node-tool" data-type="v0">
                        <div class="node-preview">v0</div>
                        <div class="node-label">Vertical Path (All Balls)</div>
                    </div>
                    <div class="node-tool" data-type="v1">
                        <div class="node-preview">v1</div>
                        <div class="node-label">Vertical Path (Ball 1)</div>
                    </div>
                    <div class="node-tool" data-type="v2">
                        <div class="node-preview">v2</div>
                        <div class="node-label">Vertical Path (Ball 2)</div>
                    </div>
                    <div class="node-tool" data-type="h0">
                        <div class="node-preview">h0</div>
                        <div class="node-label">Horizontal Path (All Balls)</div>
                    </div>
                    <div class="node-tool" data-type="h1">
                        <div class="node-preview">h1</div>
                        <div class="node-label">Horizontal Path (Ball 1)</div>
                    </div>
                    <div class="node-tool" data-type="h2">
                        <div class="node-preview">h2</div>
                        <div class="node-label">Horizontal Path (Ball 2)</div>
                    </div>
                    <div class="node-tool" data-type="w0">
                        <div class="node-preview">w0</div>
                        <div class="node-label">Well</div>
                    </div>
                    <div class="node-tool" data-type="t0">
                        <div class="node-preview">t0</div>
                        <div class="node-label">Teleport</div>
                    </div>
                    <div class="node-tool" data-type="sr">
                        <div class="node-preview">sr</div>
                        <div class="node-label">Switch (Red)</div>
                    </div>
                    <div class="node-tool" data-type="sg">
                        <div class="node-preview">sg</div>
                        <div class="node-label">Switch (Green)</div>
                    </div>
                    <div class="node-tool" data-type="sb">
                        <div class="node-preview">sb</div>
                        <div class="node-label">Switch (Blue)</div>
                    </div>
                    <div class="node-tool" data-type="sl">
                        <div class="node-preview">sl</div>
                        <div class="node-label">Switch (Light Blue)</div>
                    </div>
                    <div class="node-tool" data-type="sy">
                        <div class="node-preview">sy</div>
                        <div class="node-label">Switch (Yellow)</div>
                    </div>
                    <div class="node-tool" data-type="sp">
                        <div class="node-preview">sp</div>
                        <div class="node-label">Switch (Purple)</div>
                    </div>
                    <div class="node-tool" data-type="so">
                        <div class="node-preview">so</div>
                        <div class="node-label">Switch (Orange)</div>
                    </div>
                    <div class="node-tool" data-type="$0">
                        <div class="node-preview">$0</div>
                        <div class="node-label">Sticker</div>
                    </div>
                    <div class="node-tool" data-type="xr">
                        <div class="node-preview">xr</div>
                        <div class="node-label">Trap (Red)</div>
                    </div>
                    <div class="node-tool" data-type="xg">
                        <div class="node-preview">xg</div>
                        <div class="node-label">Trap (Green)</div>
                    </div>
                    <div class="node-tool" data-type="xb">
                        <div class="node-preview">xb</div>
                        <div class="node-label">Trap (Blue)</div>
                    </div>
                    <div class="node-tool" data-type="xl">
                        <div class="node-preview">xl</div>
                        <div class="node-label">Trap (Light Blue)</div>
                    </div>
                    <div class="node-tool" data-type="xy">
                        <div class="node-preview">xy</div>
                        <div class="node-label">Trap (Yellow)</div>
                    </div>
                    <div class="node-tool" data-type="xp">
                        <div class="node-preview">xp</div>
                        <div class="node-label">Trap (Purple)</div>
                    </div>
                    <div class="node-tool" data-type="xo">
                        <div class="node-preview">xo</div>
                        <div class="node-label">Trap (Orange)</div>
                    </div>
                </div>
            </div>
            
            <div class="balls-section">
                <div class="toolbar-title" data-bs-toggle="collapse" data-bs-target="#ballsCollapse" aria-expanded="false" aria-controls="ballsCollapse" style="cursor: pointer;">
                    <i class="bi bi-chevron-down" id="ballsIcon"></i> Balls
                </div>
                <div class="collapse" id="ballsCollapse">
                    <div id="ballsList">
                        <!-- Balls will be added here dynamically -->
                    </div>
                    <button class="btn btn-sm btn-primary" onclick="addBall()"><i class="bi bi-plus-circle"></i> Add Ball</button>
                </div>
            </div>
            
            <div class="controls-section">
                <div class="toolbar-title">
                    Controls
                </div>
                <div class="control-group">
                    <label class="control-label">Level Number</label>
                    <input type="number" id="levelNumber" class="form-control" value="1" min="1">
                </div>
                <div class="btn-row">
                    <button class="btn btn-primary" onclick="saveLevel()"><i class="bi bi-download"></i> Save</button>
                    <button class="btn btn-primary" onclick="loadLevel()"><i class="bi bi-upload"></i> Load</button>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-warning" onclick="testLevel()"><i class="bi bi-play-circle"></i> Test</button>
                </div>
            </div>
        </div>
        
        <!-- Main Area -->
        <div class="main-area">
            
            <div class="board-container">
                <div class="face-editor">
                    <div class="face-title">Front Face</div>
                    <div id="frontBoard" class="board-grid">
                        <!-- Front board grid will be generated here -->
                    </div>
                </div>
                
                <div class="face-editor">
                    <div class="face-title">Rear Face</div>
                    <div id="rearBoard" class="board-grid">
                        <!-- Rear board grid will be generated here -->
                    </div>
                </div>
            </div>
            
            <div class="grid-size-section">
                <div class="control-group">
                    <label class="control-label">Board Size</label>
                    <div class="grid-size-controls">
                        <input type="number" id="gridWidth" class="form-control size-input" value="6" min="1" max="8">
                        <span style="color: #fff;">Ã—</span>
                        <input type="number" id="gridHeight" class="form-control size-input" value="6" min="1" max="16">
                    </div>
                </div>
                <div class="clear-board-section">
                    <button class="mx-2 btn btn-danger" onclick="clearBoard()"><i class="bi bi-stars"></i> Clear</button>
                    <button class="mx-2 btn btn-warning" onclick="shrinkHorizontally()"><i class="bi bi-arrows-collapse-vertical"></i> Shrink Horizontally</button>
                    <button class="mx-2 btn btn-warning" onclick="shrinkVertically()"><i class="bi bi-arrows-collapse"></i> Shrink Vertically</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Build Info -->
    <div class="build-info" id="buildInfo">
        <div><%= BUILD_PLACEHOLDER %></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    
    <!-- Bundled Editor Scripts - webpack will inject this -->
</body>
</html> 