# Cursor AI Rules - Flipgame Project

## MANDATORY: Read .ai-context.md FIRST

Before ANY code modification, you MUST read and follow:
1. `.ai-context.md` - Immediate context and checklist
2. `.ai-development-rules.md` - Non-negotiable rules
3. `CODE_INSTRUCTIONS.md` - Technical architecture

## ARCHITECTURE ENFORCEMENT

This project uses STRICT modular architecture:
```
constants.js ‚Üí utils.js ‚Üí html-builder.js ‚Üí display-manager.js ‚Üí app.js ‚Üí app-bridge.js
```

## ZERO TOLERANCE RULES

### ‚ùå NEVER DO:
- Duplicate any code, messages, or HTML templates
- Hardcode text strings outside constants.js/CONSTANTS.MESSAGES

- Write inline HTML templates - use HtmlBuilder methods
- Handle empty states manually - use DisplayManager.renderEmptyState()
- Create validation logic - use Utils.validateLevelData()
- Use Bootstrap utility classes as CSS selectors (.mt-3, .d-flex, etc.)

### ‚úÖ ALWAYS DO:
- Check if functionality exists in Utils/HtmlBuilder/DisplayManager first
- Add new messages to constants.js/CONSTANTS.MESSAGES with placeholders
- Use existing utility classes for ALL operations
- Follow established patterns exactly
- Maintain zero duplications policy
- Create semantic custom CSS classes instead of Bootstrap utility selectors

## QUICK PATTERNS

### Validation:
```javascript
try {
    try { Utils.validateLevelData(levelData); } catch (e) { console.error(e.message); return; }
} catch (error) {
    alert(error.message);
    return;
}
```



### HTML Generation:
```javascript
HtmlBuilder.createButton('Text', 'class', callback, 'icon');
HtmlBuilder.createActionButtons(id, 'EntityType');
```

### Empty States:
```javascript
DisplayManager.renderEmptyState(container, 'Message');
```

## TESTING PROTOCOL - ALWAYS FIRST ACTION

üö® **BEFORE ANY CODE CHANGES:**
1. ‚úì FIRST: Test localhost:8099 with curl
2. ‚úì If not available: Request user to run `npm run start`
3. ‚úì NEVER use alternative testing methods
4. ‚úì NEVER skip testing protocol

## MANDATORY CHECKS

Before suggesting any code:
1. ‚úì Does this functionality already exist?
2. ‚úì Am I using the correct utility class?
3. ‚úì Is this following established patterns?
4. ‚úì Will this maintain zero duplications?
5. ‚úì Is text properly centralized in constants.js?
6. ‚úì Have I tested on localhost:8099?

## ENFORCEMENT

These rules are NON-NEGOTIABLE. Any suggestion that violates them will degrade code quality and introduce regressions. 